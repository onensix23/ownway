{% extends "base.html" %}
{% load static %}

{% block content %}
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCqsYxJK8fV_IX5tRtrjlp5cmBd_RR_ceg&callback=initMap&libraries=&v=weekly" async></script>
	<script type="text/javascript">
		$('document').ready(function() {
		   	var area0 = ["시/도 선택",
			   			"서울특별시",
						"인천광역시",
						"대전광역시",
						"광주광역시",
						"대구광역시",
						"울산광역시",
						"부산광역시",
						"경기도",
						"강원도",
						"충청북도",
						"충청남도",
						"전라북도",
						"전라남도",
						"경상북도",
						"경상남도",
						"제주도"];
		});

		function initMap() {
			const map = new google.maps.Map(document.getElementById('map'), {
				zoom: 8,
				center: { lat: 40.731, lng: -73.997 },
			});
			const geocoder = new google.maps.Geocoder();
			const infowindow = new google.maps.InfoWindow();
		}


		var data1=[];

		function checkLoc() {
			if($("#sido1 option:selected").val() == "시/도 선택") {
		    	alert("시/도를 선택해주세요.");
		    	return false;
		  	}
		  	else{
				$("#row1").css({'display':'none'});
				$("#row2").css({'display':''});
			  	return true;
		  	}
		}

		function selectLoc(){
			data1.push($("#sido1").val());
			data1.push($("#gugun1").val());
			console.log(data1);
		}


		function checkTheme() {
			if($("#theme1 option:selected").val() == "장소 선택") {
			    alert("장소를 선택해주세요.");
			    return false;
			  }
			else{
				$("#row2").css({'display':'none'});
				$("#row3").css({'display':''});

				return true;
			}
		}

		function selectTheme(){
			data1.push($("#theme1 option:selected").val());

			console.log(data1);
		}

		function checkPhoto(){
			if($("#file1").val() == "") {
			    alert("사진을 선택해주세요.");
			    return false;
			  }
			else{
				$("#row3").css({'display':'none'});
				$("#row4").css({'display':''});
				return true;
			}
		}

		function selectPhoto(){
			data1.push($("#file1").val());



			console.log(data1);
		}
		function checkTitle(){
			if($("#title1").val() == ""){
			    alert("제목을 입력해주세요.");
			    return false;
			}else{
				$("#row4").css({'display':'none'});
				$("#row5").css({'display':''});
				return true;
			}
		}
		function checkPost(){
			if($("#content1").val() == ""){
			    alert("내용을 입력해주세요.");
			    return false;
			}else{
				return true;
			}
		}

		function writeTitle(){
			data1.push($("#title1").val());


			console.log(data1);
		}

		function writePost(){
			var k = $("#fr").serialize()
			console.log(k);
		}

		var loc;

		function myLocation(){
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(
					(position) => {
						const pos = {
							lat: position.coords.latitude,
							lng: position.coords.longitude,
						};
						loc = pos;
					},
					() => {
						// handleLocationError(true, infoWindow, map.getCenter());
					}
				);
				console.log(loc);
			}
			else {
				// Browser doesn't support Geolocation
				// handleLocationError(false, infoWindow, map.getCenter());
			}
		}
		function getGuGun(){
			var adm_dr_cd = $('#sido option:selected').val()

		}
	</script>

    <div class="container">
		<div id="map"></div>
        <div class="row">
            <h1 style="text-align:center; margin:auto;">글 쓰기</h1>
        </div>
		<form action="{% url 'boardInsert' %}" method="POST" role="form" name="fr"  id="fr" enctype="multipart/form-data"> {% csrf_token %}
		<div class="row" id="row1">
			<h2>시/군.구 선택</h2>
			<div class="col-6">
				<select class="form-control" name="sido1" id="sido1" onchange="getGuGun()"></select>
				<select class="form-control" name="gugun1" id="gugun1"></select>
				<select class="form-control" name="dong1" id="dong1">
					<option value="1">전체</option>
				</select>
			</div>
			<div class="col-3">
				<input class="btn btn-info" type="button" value="다음" onclick="return checkLoc()">
			</div>
			<div class="col-3">
				<input type="button" value="위치"  id="ReverseGecode" onclick="myLocation()"/>
			</div>
		</div>

		<div class="row" id="row2" style="display:none;">
			<h2>장소 선택</h2>
			<div class="mb-3">
				<select class="form-control" name="theme1" id="theme1">
					<option value="장소 선택">장소 선택</option>
					<option value="술">술</option>
					<option value="식사">식사</option>
					<option value="놀이">놀이</option>
					<option value="실외">실외</option>
					<option value="디저트">디저트</option>
				</select>
			</div>
			<div class="mb-3">
				<input class="btn btn-info" type="button" value="다음" onclick="return checkTheme()">
			</div>
		</div>


		<div class="row" id="row3" style="display:none;">
			<h2>사진 업로드</h2>
<!--			<form action="javascript: selectPhoto()" role="form" method="post" onsubmit="return checkPhoto()" enctype="multipart/form-data">

			</form>-->
			<div class="mb-3">
				<input class="btn btn-primary" multiple="multiple" type="file" id="file1" name="file1" />
			</div>
			<div class="mb-3">
				<input class="btn btn-info" type="button" value="다음" onclick="return checkPhoto()">
			</div>
		</div>

		<div class="row" id="row4" style="display:none;">
			<h2>제목</h2>
<!--			<form action="javascript: writeTitle()" role="form" method="post" onsubmit="return checkTitle()">

			</form>-->
			<div class="mb-3">
				<input type="text" class="form-control" id="title1" name="title1">
			</div>
			<div class="mb-3">
				<input class="btn btn-info" type="button" value="저장" onclick="return checkTitle()">
			</div>
		</div>

		<div class="row" id="row5" style="display:none;">
			<h2>내용</h2>
<!--			<form action="javascript: writePost()" role="form" method="post" onsubmit="return checkPost()" enctype="multipart/form-data">

			</form>-->
			<div class="mb-3">
				<textarea id="content1" name="content1" class="form-control"> </textarea>
			</div>
			<div class="mb-3">
				<input class="btn btn-info" type="submit" value="저장" onclick="return checkPost()">
			</div>
		</div>
		</form>
	</div>

{% endblock %}